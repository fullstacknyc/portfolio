<!doctype html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Camilo - JavaScript Developer</title>
<meta name="color-scheme" content="dark light">
<style>
  :root {
    --bg: #111;
    --fg: #fff;
    --line: #fff2;
    --muted: .7;
  }
  html, body { height: 100%; }
  body {
    margin: 0;
    background: var(--bg);
    color: var(--fg);
    font: 17px/1.6 'Inter', system-ui, sans-serif;
    overflow: hidden;
  }
  main {
    height: 100svh;
    display: grid;
    place-items: center;
    padding: 6vmin;
  }
  .wrap {
    width: min(600px, 94vw);
    display: grid;
    gap: 2.5rem;
    text-align: left;
  }
  .pane {
    display: none;
    border-left: 2px solid var(--line);
    padding-left: 2rem;
    min-height: 180px;
  }
  .pane.active {
    display: block;
    animation: fade-in .22s;
  }
  @keyframes fade-in { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: none; } }
  h1, h2 {
    font-size: 2rem;
    font-weight: 500;
    margin: 0 0 1rem 0;
    letter-spacing: -1px;
  }
  .caret::after {
    content: "▌";
    margin-left: 2px;
    animation: blink 1s steps(1,end) infinite;
  }
  @keyframes blink { 50% { opacity: 0; } }
  ul, ol {
    margin: 1.2rem 0 0 0;
    padding: 0;
    list-style: none;
  }
  li {
    margin-bottom: .7rem;
    font-size: 1.08rem;
  }
  a {
    color: inherit;
    text-decoration: underline;
    transition: opacity .15s;
    opacity: .92;
  }
  a:hover, a:focus-visible {
    opacity: 1;
    text-decoration: none;
    outline: none;
  }
  .muted { opacity: var(--muted); }
  .line { border-top: 1px solid var(--line); margin: 2rem 0; }
</style>
<main>
  <section id="app" class="wrap" aria-live="polite"></section>
</main>

<!-- visible when JS is disabled -->
<noscript>
  <main style="padding:2rem;color:#fff;background:#111">Enable JavaScript to view this site.</main>
</noscript>

<script>
(() => {
  const app = document.getElementById('app');
  console.log('portfolio script loaded');
  window.addEventListener('error', e => {
    // show a visible error message so you can debug if the script fails
    app.innerHTML = '<pre style="color:#fff;white-space:pre-wrap">JavaScript error: ' + (e && e.message) + '</pre>';
    console.error('Captured error:', e);
  });
  const reduce = matchMedia('(prefers-reduced-motion: reduce)').matches;
  const RTL = new Set(['ar','he','fa','ur','ps']);

  const LANGS = [['Hello','en'],['Hola','es'],['Bonjour','fr'],['Hallo','de'],['Ciao','it'],['こんにちは','ja'],['你好','zh'],['안녕하세요','ko'],['Greetings','hi'],['Hello','ar']];
  const ABOUT = "Camilo - JavaScript developer focused on clean UI and fast, practical shipping.";
  const LINKS = [
    ['GitHub','https://github.com/fullstacknyc'],
    ['LinkedIn','https://www.linkedin.com/in/camilogomezvalencia/'],
    ['Email','mailto:jgomezval@icloud.com'],
    ['Resume (PDF)','Profile.pdf'],
  ];
  const PROJECT = { 
    title:'audioCloud — File Transfer', 
    desc:'Lightweight web app for fast, reliable file transfers with simple share links.',
    live:'#',
    code:'https://github.com/fullstacknyc'
  };

  let idx = 0, typed = [false, false, false, false], lock = false;
  const panes = [];

  // Utility
  const el = (t,c,txt) => {
    const parts = String(t || 'div').trim().split(/\s+/);
    const tag = parts[0] || 'div';
    const clsFromTag = parts.slice(1);
    const e = document.createElement(tag);
    const classes = [];
    if (clsFromTag.length) classes.push(...clsFromTag);
    if (c) classes.push(c);
    if (classes.length) e.className = classes.join(' ');
    if (txt != null) e.textContent = txt;
    return e;
  };
  const sleep = ms => new Promise(r=>setTimeout(r,ms));
  const show = i => panes.forEach((p,n)=>p.classList.toggle('active',n===i));

  // Pane 0: Hello
  const p0 = el('div','pane active');
  const hello = el('h1 caret'); p0.append(hello); panes.push(p0);

  // Pane 1: About
  const p1 = el('div','pane');
  const about = el('p muted'); p1.append(about); panes.push(p1);

  // Pane 2: Links
  const p2 = el('div','pane');
  const linksTitle = el('h2',null,'Links');
  const linksList = el('ul');
  LINKS.forEach(([t,h]) => {
    const li = el('li');
    const a = el('a',null,t); a.href=h; a.target='_blank'; a.rel='noopener noreferrer';
    li.append(a); linksList.append(li);
  });
  p2.append(linksTitle, linksList); panes.push(p2);

  // Pane 3: Project
  const p3 = el('div','pane');
  const projTitle = el('h2',null,PROJECT.title);
  const projDesc = el('p',null,PROJECT.desc);
  const projLinks = el('ul');
  [
    ['Live', PROJECT.live],
    ['Code', PROJECT.code]
  ].forEach(([t,h]) => {
    const li = el('li');
    const a = el('a',null,t); a.href=h; a.target='_blank'; a.rel='noopener noreferrer';
    li.append(a); projLinks.append(li);
  });
  p3.append(projTitle, projDesc, projLinks); panes.push(p3);

  panes.forEach(p=>app.append(p));

  // Navigation
  const go = n => {
    idx = Math.max(0, Math.min(panes.length-1, n));
    show(idx);
    if (!typed[idx]) typePane(idx);
  };

  addEventListener('wheel', e => { e.preventDefault(); if(lock) return; lock=true; const d=Math.sign(e.deltaY); if(d>0) go(idx+1); if(d<0) go(idx-1); setTimeout(()=>lock=false,200); }, {passive:false});
  addEventListener('keydown', e => {
    const k=e.key; if(k==='Enter'||k==='ArrowDown'||k==='PageDown'){ e.preventDefault(); go(idx+1); }
    if(k==='ArrowUp'||k==='PageUp'){ e.preventDefault(); go(idx-1); }
    if(k==='Home'){ e.preventDefault(); go(0); }
    if(k==='End'){ e.preventDefault(); go(panes.length-1); }
  }, {passive:false});
  let y0=null;
  addEventListener('touchstart',e=>{ if(e.touches.length===1) y0=e.touches[0].clientY; },{passive:true});
  addEventListener('touchmove',e=>{ if(y0==null) return; const dy=e.touches[0].clientY-y0; if(Math.abs(dy)<24) return; e.preventDefault(); if(dy<0) go(idx+1); else go(idx-1); y0=null; },{passive:false});
  addEventListener('touchend',()=>{ y0=null; },{passive:true});

// Typing effects for all panes
  // helper to type text into an element, pause, then delete it
  async function typeReplace(el, text, speed = 90, pause = 700) {
    // type
    el.textContent = '';
    for (let i = 0; i < text.length; i++) {
      el.textContent += text[i];
      await sleep(speed);
    }
    // pause with full text shown
    await sleep(pause);
    // delete
    const delSpeed = Math.max(20, Math.floor(speed / 2));
    for (let i = text.length - 1; i >= 0; i--) {
      el.textContent = text.slice(0, i);
      await sleep(delSpeed);
    }
    // small gap before next cycle
    await sleep(120);
  }

  (async function cycleHello(){
    if(reduce){ hello.textContent='Hello'; return; }
    let i=0;
    while(document.body){
      const [word,lang]=LANGS[i++%LANGS.length];
      hello.lang=lang; hello.dir=RTL.has(lang)?'rtl':'ltr';
      await typeReplace(hello, word, 90, 700);
    }
  })();

  async function typePane(idx) {
    typed[idx] = true;
    if(reduce) {
      if(idx===1) about.textContent = ABOUT;
      if(idx===2) linksList.querySelectorAll('li').forEach((li,i)=>li.style.opacity=1);
      if(idx===3) { projDesc.textContent = PROJECT.desc; projLinks.querySelectorAll('li').forEach(li=>li.style.opacity=1); }
      return;
    }
    if(idx===1) {
      about.textContent = '';
      for(let i=0;i<ABOUT.length;i++){ about.textContent+=ABOUT[i]; await sleep(14); }
    }
    if(idx===2) {
      linksList.querySelectorAll('li').forEach(li=>li.style.opacity=0);
      for(let li of linksList.children) { await sleep(120); li.style.opacity=1; }
    }
    if(idx===3) {
      projDesc.textContent = '';
      for(let i=0;i<PROJECT.desc.length;i++){ projDesc.textContent+=PROJECT.desc[i]; await sleep(14); }
      projLinks.querySelectorAll('li').forEach(li=>li.style.opacity=0);
      for(let li of projLinks.children) { await sleep(120); li.style.opacity=1; }
    }
  }
})();
</script>
</html>
